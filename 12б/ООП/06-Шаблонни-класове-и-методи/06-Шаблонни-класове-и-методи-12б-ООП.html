<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Шаблонни класове и методи — 12б, ООП</title>
    <style>
        body {
            font-family: 'DejaVu Serif', 'Times New Roman', serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #fd7e14;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #fd7e14;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        
        ul {
            margin: 15px 0;
        }
        
        li {
            margin: 8px 0;
        }
        
        code {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.4;
        }
        
        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        
        .example {
            background-color: #e8f5e8;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 15px 0;
        }
        
        .important {
            background-color: #f8d7da;
            padding: 15px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        
        .config {
            background-color: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
        
        .patterns {
            background-color: #f3e5f5;
            padding: 15px;
            border-left: 4px solid #9c27b0;
            margin: 15px 0;
        }
        
        .security {
            background-color: #ffebee;
            padding: 15px;
            border-left: 4px solid #f44336;
            margin: 15px 0;
        }
        
        strong {
            color: #2c3e50;
        }
        
        .section-number {
            color: #fd7e14;
            font-weight: bold;
        }
        
        .format-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .format-card {
            background-color: #f8f9fa;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
        
        .format-card h4 {
            color: #fd7e14;
            margin-top: 0;
        }
        
        @media print {
            body {
                background-color: white;
            }
            .container {
                box-shadow: none;
                padding: 0;
            }
            .format-comparison {
                display: block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Шаблонни класове и методи — 12б, ООП</h1>

        <h2><span class="section-number">1. Увод</span></h2>
        <div class="important">
            <p>Шаблоните (Generics) са мощна функционалност в C#, която ни позволява да създаваме класове, методи и интерфейси, които работят с различни типове данни, като запазват типовата безопасност.</p>
        </div>

        <h2><span class="section-number">2. Какво са шаблоните?</span></h2>
        <div class="config">
            <h4>Шаблоните позволяват:</h4>
            <ul>
                <li><strong>Типова безопасност</strong> - компилаторът проверява типовете</li>
                <li><strong>Преизползване на код</strong> - един код за множество типове</li>
                <li><strong>Производителност</strong> - без boxing/unboxing</li>
                <li><strong>Гъвкавост</strong> - работа с различни типове данни</li>
                <li><strong>Читаемост</strong> - по-ясен и понятен код</li>
            </ul>
        </div>

        <h2><span class="section-number">3. Шаблонни класове</span></h2>
        
        <div class="config">
            <h4>Синтаксис на шаблонните класове:</h4>
            <ul>
                <li><strong>&lt;T&gt;</strong> - дефиниране на тип параметър</li>
                <li><strong>Множество параметри</strong> - &lt;T, U, V&gt;</li>
                <li><strong>Ограничения</strong> - where T : constraint</li>
                <li><strong>Използване</strong> - ClassName&lt;int&gt; obj = new ClassName&lt;int&gt;();</li>
            </ul>
        </div>

        <div class="example">
            <h4>Основен пример с шаблонен клас:</h4>
            <pre><code>// Шаблонен клас за списък
class GenericList<T> {
    private T[] items;
    private int count;
    private int capacity;
    
    public GenericList(int initialCapacity = 4) {
        capacity = initialCapacity;
        items = new T[capacity];
        count = 0;
    }
    
    public void Add(T item) {
        if (count >= capacity) {
            Resize();
        }
        items[count] = item;
        count++;
    }
    
    public T Get(int index) {
        if (index < 0 || index >= count) {
            throw new IndexOutOfRangeException("Индексът е извън границите");
        }
        return items[index];
    }
    
    public void Set(int index, T item) {
        if (index < 0 || index >= count) {
            throw new IndexOutOfRangeException("Индексът е извън границите");
        }
        items[index] = item;
    }
    
    public int Count {
        get { return count; }
    }
    
    public bool IsEmpty {
        get { return count == 0; }
    }
    
    private void Resize() {
        capacity *= 2;
        T[] newItems = new T[capacity];
        Array.Copy(items, newItems, count);
        items = newItems;
    }
    
    public void Display() {
        Console.WriteLine($"Списък с {count} елемента:");
        for (int i = 0; i < count; i++) {
            Console.WriteLine($"[{i}] = {items[i]}");
        }
    }
}

// Използване с различни типове
GenericList<int> intList = new GenericList<int>();
intList.Add(10);
intList.Add(20);
intList.Add(30);
intList.Display();

GenericList<string> stringList = new GenericList<string>();
stringList.Add("Здравей");
stringList.Add("Свят");
stringList.Display();

GenericList<double> doubleList = new GenericList<double>();
doubleList.Add(3.14);
doubleList.Add(2.71);
doubleList.Display();</code></pre>
        </div>

        <h2><span class="section-number">4. Шаблонни методи</span></h2>
        
        <div class="config">
            <h4>Характеристики на шаблонните методи:</h4>
            <ul>
                <li><strong>Тип параметри</strong> - &lt;T&gt; в декларацията</li>
                <li><strong>Автоматично определяне</strong> - компилаторът може да определи типа</li>
                <li><strong>Ограничения</strong> - where T : constraint</li>
                <li><strong>Преизползване</strong> - един метод за множество типове</li>
            </ul>
        </div>

        <div class="example">
            <h4>Пример с шаблонни методи:</h4>
            <pre><code>class ArrayHelper {
    // Шаблонен метод за размяна на елементи
    public static void Swap<T>(ref T a, ref T b) {
        T temp = a;
        a = b;
        b = temp;
    }
    
    // Шаблонен метод за намиране на максимален елемент
    public static T FindMax<T>(T[] array) where T : IComparable<T> {
        if (array == null || array.Length == 0) {
            throw new ArgumentException("Масивът е празен или null");
        }
        
        T max = array[0];
        for (int i = 1; i < array.Length; i++) {
            if (array[i].CompareTo(max) > 0) {
                max = array[i];
            }
        }
        return max;
    }
    
    // Шаблонен метод за търсене на елемент
    public static int FindIndex<T>(T[] array, T item) where T : IEquatable<T> {
        if (array == null) return -1;
        
        for (int i = 0; i < array.Length; i++) {
            if (array[i].Equals(item)) {
                return i;
            }
        }
        return -1;
    }
    
    // Шаблонен метод за обръщане на масив
    public static void Reverse<T>(T[] array) {
        if (array == null) return;
        
        int left = 0;
        int right = array.Length - 1;
        
        while (left < right) {
            Swap(ref array[left], ref array[right]);
            left++;
            right--;
        }
    }
    
    // Шаблонен метод за копиране на масив
    public static T[] Copy<T>(T[] source) {
        if (source == null) return null;
        
        T[] copy = new T[source.Length];
        Array.Copy(source, copy, source.Length);
        return copy;
    }
    
    // Шаблонен метод за показване на масив
    public static void Display<T>(T[] array) {
        if (array == null) {
            Console.WriteLine("Масивът е null");
            return;
        }
        
        Console.WriteLine($"Масив с {array.Length} елемента:");
        for (int i = 0; i < array.Length; i++) {
            Console.WriteLine($"[{i}] = {array[i]}");
        }
    }
}

// Използване
int[] numbers = { 5, 2, 8, 1, 9 };
string[] words = { "ябълка", "банан", "портокал" };
double[] decimals = { 3.14, 2.71, 1.41 };

// Размяна на елементи
int a = 10, b = 20;
Console.WriteLine($"Преди: a = {a}, b = {b}");
ArrayHelper.Swap(ref a, ref b);
Console.WriteLine($"След: a = {a}, b = {b}");

// Намиране на максимален елемент
Console.WriteLine($"Максимално число: {ArrayHelper.FindMax(numbers)}");
Console.WriteLine($"Максимална дума: {ArrayHelper.FindMax(words)}");
Console.WriteLine($"Максимално десетично: {ArrayHelper.FindMax(decimals)}");

// Търсене на елемент
int index = ArrayHelper.FindIndex(words, "банан");
Console.WriteLine($"Индекс на 'банан': {index}");

// Обръщане на масив
ArrayHelper.Display(numbers);
ArrayHelper.Reverse(numbers);
ArrayHelper.Display(numbers);</code></pre>
        </div>

        <h2><span class="section-number">5. Ограничения на типовете (Constraints)</span></h2>
        
        <div class="config">
            <h4>Видове ограничения:</h4>
            <ul>
                <li><strong>where T : class</strong> - T трябва да е референтен тип</li>
                <li><strong>where T : struct</strong> - T трябва да е стойностен тип</li>
                <li><strong>where T : new()</strong> - T трябва да има конструктор без параметри</li>
                <li><strong>where T : BaseClass</strong> - T трябва да наследява BaseClass</li>
                <li><strong>where T : IInterface</strong> - T трябва да имплементира IInterface</li>
            </ul>
        </div>

        <div class="example">
            <h4>Пример с ограничения:</h4>
            <pre><code>// Интерфейс за сравняване
interface IComparable<T> {
    int CompareTo(T other);
}

// Базов клас за животни
class Animal {
    public string Name { get; set; }
    public int Age { get; set; }
    
    public Animal(string name, int age) {
        Name = name;
        Age = age;
    }
}

// Клас за кучета
class Dog : Animal, IComparable<Dog> {
    public string Breed { get; set; }
    
    public Dog(string name, int age, string breed) : base(name, age) {
        Breed = breed;
    }
    
    public int CompareTo(Dog other) {
        return Age.CompareTo(other.Age);
    }
    
    public override string ToString() {
        return $"{Name} ({Breed}, {Age} години)";
    }
}

// Шаблонен клас с ограничения
class GenericContainer<T> where T : class, new() {
    private T item;
    
    public GenericContainer() {
        item = new T(); // Възможно заради new() ограничението
    }
    
    public T Item {
        get { return item; }
        set { item = value; }
    }
    
    public void Reset() {
        item = new T();
    }
}

// Шаблонен клас за сравняване
class SortedList<T> where T : IComparable<T> {
    private List<T> items;
    
    public SortedList() {
        items = new List<T>();
    }
    
    public void Add(T item) {
        items.Add(item);
        items.Sort(); // Възможно заради IComparable<T> ограничението
    }
    
    public T GetMin() {
        if (items.Count == 0) {
            throw new InvalidOperationException("Списъкът е празен");
        }
        return items[0];
    }
    
    public T GetMax() {
        if (items.Count == 0) {
            throw new InvalidOperationException("Списъкът е празен");
        }
        return items[items.Count - 1];
    }
    
    public void Display() {
        Console.WriteLine("Сортиран списък:");
        foreach (var item in items) {
            Console.WriteLine($"- {item}");
        }
    }
}

// Шаблонен метод с множество ограничения
class GenericHelper {
    public static T CreateAndInitialize<T>() where T : class, new() {
        return new T();
    }
    
    public static void SortArray<T>(T[] array) where T : IComparable<T> {
        Array.Sort(array);
    }
    
    public static T FindItem<T>(T[] array, T item) where T : IEquatable<T> {
        foreach (var element in array) {
            if (element.Equals(item)) {
                return element;
            }
        }
        return default(T);
    }
}

// Използване
var container = new GenericContainer<Dog>();
container.Item = new Dog("Рекс", 3, "Лабрадор");
Console.WriteLine($"Съдържание: {container.Item}");

var sortedDogs = new SortedList<Dog>();
sortedDogs.Add(new Dog("Рекс", 3, "Лабрадор"));
sortedDogs.Add(new Dog("Бади", 1, "Джак Ръсел"));
sortedDogs.Add(new Dog("Ласи", 5, "Коли"));
sortedDogs.Display();

int[] numbers = { 5, 2, 8, 1, 9 };
GenericHelper.SortArray(numbers);
ArrayHelper.Display(numbers);</code></pre>
        </div>

        <h2><span class="section-number">6. Шаблонни интерфейси</span></h2>
        
        <div class="config">
            <h4>Характеристики на шаблонните интерфейси:</h4>
            <ul>
                <li><strong>Тип параметри</strong> - &lt;T&gt; в декларацията</li>
                <li><strong>Ограничения</strong> - where T : constraint</li>
                <li><strong>Ковариантност</strong> - out T за връщане на стойности</li>
                <li><strong>Контравариантност</strong> - in T за приемане на параметри</li>
            </ul>
        </div>

        <div class="example">
            <h4>Пример с шаблонни интерфейси:</h4>
            <pre><code>// Шаблонен интерфейс за репозиторий
interface IRepository<T> {
    void Add(T item);
    void Remove(T item);
    T GetById(int id);
    List<T> GetAll();
    void Update(T item);
}

// Шаблонен интерфейс за сравняване
interface IComparer<T> {
    int Compare(T x, T y);
}

// Шаблонен интерфейс за филтриране
interface IFilter<T> {
    bool IsMatch(T item);
}

// Шаблонен интерфейс за сериализация
interface ISerializer<T> {
    string Serialize(T obj);
    T Deserialize(string data);
}

// Конкретна имплементация за потребители
class User {
    public int Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    
    public User(int id, string name, string email) {
        Id = id;
        Name = name;
        Email = email;
    }
    
    public override string ToString() {
        return $"User: {Name} ({Email})";
    }
}

// Имплементация на репозиторий за потребители
class UserRepository : IRepository<User> {
    private List<User> users;
    private int nextId;
    
    public UserRepository() {
        users = new List<User>();
        nextId = 1;
    }
    
    public void Add(User user) {
        user.Id = nextId++;
        users.Add(user);
        Console.WriteLine($"Добавен потребител: {user}");
    }
    
    public void Remove(User user) {
        users.Remove(user);
        Console.WriteLine($"Премахнат потребител: {user}");
    }
    
    public User GetById(int id) {
        return users.FirstOrDefault(u => u.Id == id);
    }
    
    public List<User> GetAll() {
        return new List<User>(users);
    }
    
    public void Update(User user) {
        var existingUser = GetById(user.Id);
        if (existingUser != null) {
            existingUser.Name = user.Name;
            existingUser.Email = user.Email;
            Console.WriteLine($"Обновен потребител: {user}");
        }
    }
}

// Имплементация на сравняване за потребители
class UserNameComparer : IComparer<User> {
    public int Compare(User x, User y) {
        if (x == null && y == null) return 0;
        if (x == null) return -1;
        if (y == null) return 1;
        
        return string.Compare(x.Name, y.Name, StringComparison.OrdinalIgnoreCase);
    }
}

// Имплементация на филтър за потребители
class UserEmailFilter : IFilter<User> {
    private string domain;
    
    public UserEmailFilter(string domain) {
        this.domain = domain;
    }
    
    public bool IsMatch(User user) {
        return user.Email.EndsWith(domain);
    }
}

// Имплементация на сериализатор за потребители
class UserSerializer : ISerializer<User> {
    public string Serialize(User user) {
        return $"{user.Id}|{user.Name}|{user.Email}";
    }
    
    public User Deserialize(string data) {
        var parts = data.Split('|');
        if (parts.Length != 3) {
            throw new ArgumentException("Невалиден формат на данните");
        }
        
        return new User(int.Parse(parts[0]), parts[1], parts[2]);
    }
}

// Използване
var userRepo = new UserRepository();
var user1 = new User(0, "Иван Петров", "ivan@example.com");
var user2 = new User(0, "Мария Георгиева", "maria@company.com");
var user3 = new User(0, "Петър Стоянов", "petar@example.com");

userRepo.Add(user1);
userRepo.Add(user2);
userRepo.Add(user3);

Console.WriteLine("\nВсички потребители:");
foreach (var user in userRepo.GetAll()) {
    Console.WriteLine(user);
}

// Филтриране по домейн
var emailFilter = new UserEmailFilter("@example.com");
var filteredUsers = userRepo.GetAll().Where(u => emailFilter.IsMatch(u));
Console.WriteLine("\nПотребители с @example.com:");
foreach (var user in filteredUsers) {
    Console.WriteLine(user);
}

// Сортиране по име
var nameComparer = new UserNameComparer();
var sortedUsers = userRepo.GetAll().OrderBy(u => u, nameComparer);
Console.WriteLine("\nСортирани потребители:");
foreach (var user in sortedUsers) {
    Console.WriteLine(user);
}

// Сериализация
var serializer = new UserSerializer();
string serialized = serializer.Serialize(user1);
Console.WriteLine($"\nСериализиран потребител: {serialized}");

var deserializedUser = serializer.Deserialize(serialized);
Console.WriteLine($"Възстановен потребител: {deserializedUser}");</code></pre>
        </div>

        <h2><span class="section-number">7. Пълен пример - Система за управление на склад</span></h2>
        
        <div class="highlight">
            <h4>Реален пример с шаблони:</h4>
            <pre><code>// Шаблонен интерфейс за продукти
interface IProduct<T> where T : IComparable<T> {
    T Id { get; }
    string Name { get; }
    decimal Price { get; }
    int Quantity { get; set; }
    DateTime CreatedDate { get; }
}

// Базов клас за продукти
abstract class ProductBase<T> : IProduct<T> where T : IComparable<T> {
    public T Id { get; }
    public string Name { get; }
    public decimal Price { get; }
    public int Quantity { get; set; }
    public DateTime CreatedDate { get; }
    
    protected ProductBase(T id, string name, decimal price, int quantity) {
        Id = id;
        Name = name;
        Price = price;
        Quantity = quantity;
        CreatedDate = DateTime.Now;
    }
    
    public abstract string GetCategory();
    public abstract bool IsAvailable();
    
    public virtual decimal GetTotalValue() {
        return Price * Quantity;
    }
    
    public override string ToString() {
        return $"{GetCategory()}: {Name} (ID: {Id}, Цена: {Price:C}, Количество: {Quantity})";
    }
}

// Конкретна имплементация за електроника
class Electronics<T> : ProductBase<T> where T : IComparable<T> {
    public string Brand { get; }
    public string Model { get; }
    public int WarrantyMonths { get; }
    
    public Electronics(T id, string name, decimal price, int quantity, 
                      string brand, string model, int warrantyMonths) 
                      : base(id, name, price, quantity) {
        Brand = brand;
        Model = model;
        WarrantyMonths = warrantyMonths;
    }
    
    public override string GetCategory() {
        return "Електроника";
    }
    
    public override bool IsAvailable() {
        return Quantity > 0;
    }
    
    public override string ToString() {
        return base.ToString() + $" [Марка: {Brand}, Модел: {Model}, Гаранция: {WarrantyMonths} месеца]";
    }
}

// Конкретна имплементация за книги
class Book<T> : ProductBase<T> where T : IComparable<T> {
    public string Author { get; }
    public string ISBN { get; }
    public int Pages { get; }
    
    public Book(T id, string name, decimal price, int quantity, 
                string author, string isbn, int pages) 
                : base(id, name, price, quantity) {
        Author = author;
        ISBN = isbn;
        Pages = pages;
    }
    
    public override string GetCategory() {
        return "Книги";
    }
    
    public override bool IsAvailable() {
        return Quantity > 0;
    }
    
    public override string ToString() {
        return base.ToString() + $" [Автор: {Author}, ISBN: {ISBN}, Страници: {Pages}]";
    }
}

// Шаблонен клас за склад
class Warehouse<T, U> where T : IProduct<U> where U : IComparable<U> {
    private Dictionary<U, T> products;
    private List<U> productIds;
    
    public Warehouse() {
        products = new Dictionary<U, T>();
        productIds = new List<U>();
    }
    
    public void AddProduct(T product) {
        if (products.ContainsKey(product.Id)) {
            throw new ArgumentException($"Продукт с ID {product.Id} вече съществува");
        }
        
        products[product.Id] = product;
        productIds.Add(product.Id);
        Console.WriteLine($"Добавен продукт: {product}");
    }
    
    public void RemoveProduct(U id) {
        if (!products.ContainsKey(id)) {
            throw new ArgumentException($"Продукт с ID {id} не съществува");
        }
        
        var product = products[id];
        products.Remove(id);
        productIds.Remove(id);
        Console.WriteLine($"Премахнат продукт: {product}");
    }
    
    public T GetProduct(U id) {
        if (!products.ContainsKey(id)) {
            throw new ArgumentException($"Продукт с ID {id} не съществува");
        }
        return products[id];
    }
    
    public List<T> GetAllProducts() {
        return productIds.Select(id => products[id]).ToList();
    }
    
    public List<T> GetProductsByCategory(string category) {
        return products.Values.Where(p => p.GetCategory() == category).ToList();
    }
    
    public List<T> GetAvailableProducts() {
        return products.Values.Where(p => p.IsAvailable()).ToList();
    }
    
    public decimal GetTotalValue() {
        return products.Values.Sum(p => p.GetTotalValue());
    }
    
    public void UpdateQuantity(U id, int newQuantity) {
        if (!products.ContainsKey(id)) {
            throw new ArgumentException($"Продукт с ID {id} не съществува");
        }
        
        var product = products[id];
        product.Quantity = newQuantity;
        Console.WriteLine($"Обновено количество за {product.Name}: {newQuantity}");
    }
    
    public void DisplayInventory() {
        Console.WriteLine($"\n=== Складова наличност ===");
        Console.WriteLine($"Общо продукти: {products.Count}");
        Console.WriteLine($"Обща стойност: {GetTotalValue():C}");
        Console.WriteLine();
        
        foreach (var product in products.Values) {
            Console.WriteLine(product);
        }
    }
}

// Шаблонен клас за търсене
class ProductSearch<T, U> where T : IProduct<U> where U : IComparable<U> {
    public List<T> SearchByName(List<T> products, string name) {
        return products.Where(p => p.Name.ToLower().Contains(name.ToLower())).ToList();
    }
    
    public List<T> SearchByPriceRange(List<T> products, decimal minPrice, decimal maxPrice) {
        return products.Where(p => p.Price >= minPrice && p.Price <= maxPrice).ToList();
    }
    
    public List<T> SearchByCategory(List<T> products, string category) {
        return products.Where(p => p.GetCategory() == category).ToList();
    }
    
    public List<T> SearchAvailable(List<T> products) {
        return products.Where(p => p.IsAvailable()).ToList();
    }
}

// Използване
var warehouse = new Warehouse<Electronics<int>, int>();
var bookWarehouse = new Warehouse<Book<string>, string>();

// Добавяне на електроника
var laptop = new Electronics<int>(1, "Laptop Dell", 1500, 5, "Dell", "Inspiron 15", 24);
var phone = new Electronics<int>(2, "iPhone 15", 1200, 10, "Apple", "iPhone 15", 12);
var tablet = new Electronics<int>(3, "iPad Air", 800, 3, "Apple", "iPad Air", 12);

warehouse.AddProduct(laptop);
warehouse.AddProduct(phone);
warehouse.AddProduct(tablet);

// Добавяне на книги
var book1 = new Book<string>("B001", "C# Programming", 50, 20, "Иван Петров", "978-1234567890", 400);
var book2 = new Book<string>("B002", "OOP Principles", 45, 15, "Мария Георгиева", "978-0987654321", 350);

bookWarehouse.AddProduct(book1);
bookWarehouse.AddProduct(book2);

// Показване на складовете
warehouse.DisplayInventory();
bookWarehouse.DisplayInventory();

// Търсене
var search = new ProductSearch<Electronics<int>, int>();
var appleProducts = search.SearchByName(warehouse.GetAllProducts(), "Apple");
Console.WriteLine("\nApple продукти:");
foreach (var product in appleProducts) {
    Console.WriteLine(product);
}

var expensiveProducts = search.SearchByPriceRange(warehouse.GetAllProducts(), 1000, 2000);
Console.WriteLine("\nСкъпи продукти (1000-2000 лв):");
foreach (var product in expensiveProducts) {
    Console.WriteLine(product);
}</code></pre>
        </div>

        <h2><span class="section-number">8. Предимства на шаблоните</span></h2>
        
        <div class="patterns">
            <h4>Ключови предимства:</h4>
            <ul>
                <li><strong>Типова безопасност</strong> - компилаторът проверява типовете</li>
                <li><strong>Производителност</strong> - без boxing/unboxing</li>
                <li><strong>Преизползване на код</strong> - един код за множество типове</li>
                <li><strong>Читаемост</strong> - по-ясен и понятен код</li>
                <li><strong>Гъвкавост</strong> - работа с различни типове данни</li>
            </ul>
        </div>

        <h2><span class="section-number">9. Практически задачи</span></h2>
        <div class="highlight">
            <h4>Задачи за упражнение:</h4>
            <ul>
                <li><strong>Създай шаблонен клас Stack&lt;T&gt;</strong> с методи Push, Pop, Peek</li>
                <li><strong>Имплементирай шаблонен клас Queue&lt;T&gt;</strong> с Enqueue, Dequeue</li>
                <li><strong>Направи шаблонен клас Dictionary&lt;K, V&gt;</strong> с Add, Remove, Get</li>
                <li><strong>Създай шаблонен клас Calculator&lt;T&gt;</strong> с математически операции</li>
                <li><strong>Имплементирай шаблонен клас Cache&lt;T&gt;</strong> с TTL функционалност</li>
            </ul>
        </div>

        <h2><span class="section-number">10. Заключение</span></h2>
        <div class="important">
            <p>Шаблоните са мощна функционалност, която ни позволява да създаваме гъвкав, типобезопасен и преизползваем код, който работи с различни типове данни.</p>
        </div>

        <div class="patterns">
            <h4>Ключови принципи:</h4>
            <ul>
                <li><strong>Типова безопасност</strong> - компилаторът проверява типовете</li>
                <li><strong>Преизползване</strong> - един код за множество типове</li>
                <li><strong>Производителност</strong> - без допълнителни разходи</li>
                <li><strong>Гъвкавост</strong> - работа с различни типове данни</li>
                <li><strong>Ограничения</strong> - контрол върху използваните типове</li>
            </ul>
        </div>
    </div>
</body>
</html>
