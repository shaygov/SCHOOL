<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Наследяване на класове — 12б, ООП</title>
    <style>
        body {
            font-family: 'DejaVu Serif', 'Times New Roman', serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #fd7e14;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #fd7e14;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        
        ul {
            margin: 15px 0;
        }
        
        li {
            margin: 8px 0;
        }
        
        code {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.4;
        }
        
        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        
        .example {
            background-color: #e8f5e8;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 15px 0;
        }
        
        .important {
            background-color: #f8d7da;
            padding: 15px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        
        .config {
            background-color: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
        
        .patterns {
            background-color: #f3e5f5;
            padding: 15px;
            border-left: 4px solid #9c27b0;
            margin: 15px 0;
        }
        
        .security {
            background-color: #ffebee;
            padding: 15px;
            border-left: 4px solid #f44336;
            margin: 15px 0;
        }
        
        strong {
            color: #2c3e50;
        }
        
        .section-number {
            color: #fd7e14;
            font-weight: bold;
        }
        
        .format-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .format-card {
            background-color: #f8f9fa;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
        
        .format-card h4 {
            color: #fd7e14;
            margin-top: 0;
        }
        
        @media print {
            body {
                background-color: white;
            }
            .container {
                box-shadow: none;
                padding: 0;
            }
            .format-comparison {
                display: block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Наследяване на класове — 12б, ООП</h1>

        <h2><span class="section-number">1. Увод</span></h2>
        <div class="important">
            <p>Наследяването е един от основните принципи на ООП, който ни позволява да създаваме нови класове, базирани на съществуващи, като преизползваме техния код и добавяме нова функционалност.</p>
        </div>

        <h2><span class="section-number">2. Основни понятия</span></h2>
        <div class="config">
            <h4>Терминология при наследяване:</h4>
            <ul>
                <li><strong>Базов клас (Parent/Base)</strong> - класът, който се наследява</li>
                <li><strong>Производен клас (Child/Derived)</strong> - класът, който наследява</li>
                <li><strong>Override</strong> - пренаписване на наследен метод</li>
                <li><strong>Protected</strong> - достъп само за наследниците</li>
                <li><strong>Virtual</strong> - метод, който може да се пренапише</li>
            </ul>
        </div>

        <h2><span class="section-number">3. Синтаксис на наследяване</span></h2>
        
        <div class="config">
            <h4>Основен синтаксис:</h4>
            <ul>
                <li><strong>Двоеточие (:)</strong> - показва наследяване</li>
                <li><strong>Base клас</strong> - името на класа, който се наследява</li>
                <li><strong>Единично наследяване</strong> - C# поддържа само едно наследяване</li>
                <li><strong>Множествено наследяване</strong> - чрез интерфейси</li>
            </ul>
        </div>

        <div class="example">
            <h4>Основен пример с наследяване:</h4>
            <pre><code>// Базов клас
class Animal {
    protected string name;
    protected int age;
    
    public Animal(string name, int age) {
        this.name = name;
        this.age = age;
    }
    
    public virtual void MakeSound() {
        Console.WriteLine("Животното издава звук...");
    }
    
    public virtual void Move() {
        Console.WriteLine($"{name} се движи...");
    }
    
    public void DisplayInfo() {
        Console.WriteLine($"Име: {name}, Възраст: {age}");
    }
}

// Производен клас
class Dog : Animal {
    private string breed;
    
    // Конструктор на производния клас
    public Dog(string name, int age, string breed) : base(name, age) {
        this.breed = breed;
    }
    
    // Override на наследен метод
    public override void MakeSound() {
        Console.WriteLine($"{name} лае: Woof! Woof!");
    }
    
    public override void Move() {
        Console.WriteLine($"{name} тича на четири крака");
    }
    
    // Нов метод специфичен за кучето
    public void Fetch() {
        Console.WriteLine($"{name} донесе топката!");
    }
    
    public void DisplayBreed() {
        Console.WriteLine($"Порода: {breed}");
    }
}

// Използване
Animal animal = new Animal("Животно", 3);
Dog dog = new Dog("Рекс", 2, "Лабрадор");

animal.MakeSound(); // "Животното издава звук..."
dog.MakeSound();    // "Рекс лае: Woof! Woof!"
dog.Fetch();        // "Рекс донесе топката!"</code></pre>
        </div>

        <h2><span class="section-number">4. Модификатори за достъп при наследяване</span></h2>
        
        <div class="config">
            <h4>Достъп до членове:</h4>
            <ul>
                <li><strong>Public</strong> - достъпен отвсякъде</li>
                <li><strong>Protected</strong> - достъпен в класа и наследниците</li>
                <li><strong>Private</strong> - достъпен само в класа</li>
                <li><strong>Internal</strong> - достъпен в същото assembly</li>
            </ul>
        </div>

        <div class="example">
            <h4>Пример с различни модификатори:</h4>
            <pre><code>class Vehicle {
    // Публично поле - достъпно отвсякъде
    public string brand;
    
    // Защитено поле - достъпно в класа и наследниците
    protected int year;
    
    // Приватно поле - достъпно само в този клас
    private string vin;
    
    public Vehicle(string brand, int year, string vin) {
        this.brand = brand;
        this.year = year;
        this.vin = vin;
    }
    
    // Публичен метод
    public void Start() {
        Console.WriteLine($"{brand} стартира...");
    }
    
    // Виртуален метод - може да се пренапише
    public virtual void DisplayInfo() {
        Console.WriteLine($"Марка: {brand}, Година: {year}");
    }
    
    // Защитен метод - достъпен в наследниците
    protected void CheckEngine() {
        Console.WriteLine("Проверка на двигателя...");
    }
}

class Car : Vehicle {
    private int doors;
    
    public Car(string brand, int year, string vin, int doors) 
        : base(brand, year, vin) {
        this.doors = doors;
    }
    
    // Достъп до защитените членове
    public void PerformMaintenance() {
        CheckEngine(); // Може да извика защитения метод
        Console.WriteLine($"Поддръжка на {brand} завършена");
    }
    
    // Override на виртуалния метод
    public override void DisplayInfo() {
        base.DisplayInfo(); // Извиква базовия метод
        Console.WriteLine($"Брой врати: {doors}");
    }
    
    // Нов метод
    public void OpenTrunk() {
        Console.WriteLine("Багажникът е отворен");
    }
}</code></pre>
        </div>

        <h2><span class="section-number">5. Конструктори при наследяване</span></h2>
        
        <div class="config">
            <h4>Правила за конструктори:</h4>
            <ul>
                <li><strong>Base конструктор</strong> - винаги се извиква първи</li>
                <li><strong>Base ключова дума</strong> - извикване на базовия конструктор</li>
                <li><strong>Параметри</strong> - предаване на аргументи към базовия конструктор</li>
                <li><strong>По подразбиране</strong> - ако няма base(), се извиква конструкторът по подразбиране</li>
            </ul>
        </div>

        <div class="example">
            <h4>Пример с конструктори:</h4>
            <pre><code>class Person {
    protected string name;
    protected int age;
    protected string email;
    
    // Конструктор по подразбиране
    public Person() {
        name = "Неизвестен";
        age = 0;
        email = "";
        Console.WriteLine("Person конструктор по подразбиране");
    }
    
    // Конструктор с параметри
    public Person(string name, int age) {
        this.name = name;
        this.age = age;
        this.email = "";
        Console.WriteLine($"Person конструктор: {name}");
    }
    
    // Конструктор с всички параметри
    public Person(string name, int age, string email) {
        this.name = name;
        this.age = age;
        this.email = email;
        Console.WriteLine($"Person конструктор: {name}, {email}");
    }
}

class Student : Person {
    private string studentId;
    private double gpa;
    
    // Конструктор по подразбиране
    public Student() : base() {
        studentId = "";
        gpa = 0.0;
        Console.WriteLine("Student конструктор по подразбиране");
    }
    
    // Конструктор с параметри - извиква base(name, age)
    public Student(string name, int age, string studentId) 
        : base(name, age) {
        this.studentId = studentId;
        this.gpa = 0.0;
        Console.WriteLine($"Student конструктор: {name}, {studentId}");
    }
    
    // Конструктор с всички параметри
    public Student(string name, int age, string email, string studentId, double gpa) 
        : base(name, age, email) {
        this.studentId = studentId;
        this.gpa = gpa;
        Console.WriteLine($"Student конструктор: {name}, {studentId}, {gpa}");
    }
}

// Използване
Student student1 = new Student(); // Извиква всички конструктори
Student student2 = new Student("Иван", 20, "ST001"); // Извиква base(name, age)
Student student3 = new Student("Мария", 19, "maria@email.com", "ST002", 5.5);</code></pre>
        </div>

        <h2><span class="section-number">6. Override и Virtual методи</span></h2>
        
        <div class="config">
            <h4>Ключови думи:</h4>
            <ul>
                <li><strong>Virtual</strong> - метод в базовия клас, който може да се пренапише</li>
                <li><strong>Override</strong> - пренаписване на виртуален метод</li>
                <li><strong>New</strong> - скриване на наследен метод (не препоръчва се)</li>
                <li><strong>Base</strong> - извикване на базовия метод</li>
            </ul>
        </div>

        <div class="example">
            <h4>Пример с virtual и override:</h4>
            <pre><code>class Shape {
    protected string color;
    
    public Shape(string color) {
        this.color = color;
    }
    
    // Виртуален метод - може да се пренапише
    public virtual double CalculateArea() {
        return 0;
    }
    
    // Виртуален метод
    public virtual double CalculatePerimeter() {
        return 0;
    }
    
    // Обикновен метод - не може да се пренапише
    public void DisplayColor() {
        Console.WriteLine($"Цвят: {color}");
    }
}

class Rectangle : Shape {
    private double width;
    private double height;
    
    public Rectangle(string color, double width, double height) 
        : base(color) {
        this.width = width;
        this.height = height;
    }
    
    // Override на виртуалния метод
    public override double CalculateArea() {
        return width * height;
    }
    
    public override double CalculatePerimeter() {
        return 2 * (width + height);
    }
}

class Circle : Shape {
    private double radius;
    
    public Circle(string color, double radius) : base(color) {
        this.radius = radius;
    }
    
    public override double CalculateArea() {
        return Math.PI * radius * radius;
    }
    
    public override double CalculatePerimeter() {
        return 2 * Math.PI * radius;
    }
}

// Използване
Shape shape1 = new Rectangle("Червен", 5, 3);
Shape shape2 = new Circle("Син", 4);

Console.WriteLine($"Правоъгълник - площ: {shape1.CalculateArea():F2}");
Console.WriteLine($"Кръг - площ: {shape2.CalculateArea():F2}");</code></pre>
        </div>

        <h2><span class="section-number">7. Пълен пример - Система за служители</span></h2>
        
        <div class="highlight">
            <h4>Реален пример с наследяване:</h4>
            <pre><code>// Базов клас за служител
public class Employee {
    protected string firstName;
    protected string lastName;
    protected string employeeId;
    protected decimal baseSalary;
    protected DateTime hireDate;
    
    public Employee(string firstName, string lastName, string employeeId, decimal baseSalary) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.employeeId = employeeId;
        this.baseSalary = baseSalary;
        this.hireDate = DateTime.Now;
    }
    
    // Виртуален метод за изчисляване на заплата
    public virtual decimal CalculateSalary() {
        return baseSalary;
    }
    
    // Виртуален метод за заглавие
    public virtual string GetJobTitle() {
        return "Служител";
    }
    
    // Виртуален метод за работа
    public virtual void Work() {
        Console.WriteLine($"{GetFullName()} работи...");
    }
    
    // Обикновен метод
    public string GetFullName() {
        return $"{firstName} {lastName}";
    }
    
    public int GetYearsOfService() {
        return DateTime.Now.Year - hireDate.Year;
    }
    
    public virtual void DisplayInfo() {
        Console.WriteLine($"ID: {employeeId}");
        Console.WriteLine($"Име: {GetFullName()}");
        Console.WriteLine($"Длъжност: {GetJobTitle()}");
        Console.WriteLine($"Заплата: {CalculateSalary():C}");
        Console.WriteLine($"Стаж: {GetYearsOfService()} години");
    }
}

// Производен клас за мениджър
public class Manager : Employee {
    private decimal bonus;
    private int teamSize;
    private List<string> teamMembers;
    
    public Manager(string firstName, string lastName, string employeeId, 
                   decimal baseSalary, decimal bonus, int teamSize) 
                   : base(firstName, lastName, employeeId, baseSalary) {
        this.bonus = bonus;
        this.teamSize = teamSize;
        this.teamMembers = new List<string>();
    }
    
    // Override на виртуалния метод
    public override decimal CalculateSalary() {
        return baseSalary + bonus;
    }
    
    public override string GetJobTitle() {
        return "Мениджър";
    }
    
    public override void Work() {
        Console.WriteLine($"{GetFullName()} управлява екип от {teamSize} души");
        ConductMeeting();
    }
    
    // Нови методи специфични за мениджъра
    public void ConductMeeting() {
        Console.WriteLine($"{GetFullName()} провежда среща с екипа");
    }
    
    public void AddTeamMember(string memberName) {
        if (teamMembers.Count < teamSize) {
            teamMembers.Add(memberName);
            Console.WriteLine($"Добавен член в екипа: {memberName}");
        } else {
            Console.WriteLine("Екипът е пълен!");
        }
    }
    
    public void RemoveTeamMember(string memberName) {
        if (teamMembers.Remove(memberName)) {
            Console.WriteLine($"Премахнат член от екипа: {memberName}");
        } else {
            Console.WriteLine("Членът не е намерен в екипа");
        }
    }
    
    public override void DisplayInfo() {
        base.DisplayInfo(); // Извиква базовия метод
        Console.WriteLine($"Бонус: {bonus:C}");
        Console.WriteLine($"Размер на екипа: {teamSize}");
        Console.WriteLine($"Членове на екипа: {string.Join(", ", teamMembers)}");
    }
}

// Производен клас за разработчик
public class Developer : Employee {
    private string programmingLanguage;
    private int projectsCompleted;
    private List<string> skills;
    
    public Developer(string firstName, string lastName, string employeeId, 
                     decimal baseSalary, string programmingLanguage, int projectsCompleted) 
                     : base(firstName, lastName, employeeId, baseSalary) {
        this.programmingLanguage = programmingLanguage;
        this.projectsCompleted = projectsCompleted;
        this.skills = new List<string>();
    }
    
    public override decimal CalculateSalary() {
        return baseSalary + (projectsCompleted * 500); // Бонус за проекти
    }
    
    public override string GetJobTitle() {
        return "Разработчик";
    }
    
    public override void Work() {
        Console.WriteLine($"{GetFullName()} пише код на {programmingLanguage}");
        CompleteProject();
    }
    
    // Нови методи специфични за разработчика
    public void CompleteProject() {
        projectsCompleted++;
        Console.WriteLine($"Проект завършен! Общо проекти: {projectsCompleted}");
    }
    
    public void AddSkill(string skill) {
        if (!skills.Contains(skill)) {
            skills.Add(skill);
            Console.WriteLine($"Добавено умение: {skill}");
        }
    }
    
    public void WriteCode() {
        Console.WriteLine($"{GetFullName()} пише код на {programmingLanguage}");
    }
    
    public override void DisplayInfo() {
        base.DisplayInfo();
        Console.WriteLine($"Език за програмиране: {programmingLanguage}");
        Console.WriteLine($"Завършени проекти: {projectsCompleted}");
        Console.WriteLine($"Умения: {string.Join(", ", skills)}");
    }
}

// Производен клас за стажант
public class Intern : Employee {
    private string university;
    private int monthsRemaining;
    
    public Intern(string firstName, string lastName, string employeeId, 
                  decimal baseSalary, string university, int monthsRemaining) 
                  : base(firstName, lastName, employeeId, baseSalary) {
        this.university = university;
        this.monthsRemaining = monthsRemaining;
    }
    
    public override decimal CalculateSalary() {
        return baseSalary * 0.5m; // Стажантите получават 50% от базовата заплата
    }
    
    public override string GetJobTitle() {
        return "Стажант";
    }
    
    public override void Work() {
        Console.WriteLine($"{GetFullName()} учи и помага с задачи");
        Learn();
    }
    
    public void Learn() {
        Console.WriteLine($"{GetFullName()} учи от опита на колегите");
        monthsRemaining--;
        Console.WriteLine($"Останали месеци: {monthsRemaining}");
    }
    
    public bool IsInternshipComplete() {
        return monthsRemaining <= 0;
    }
    
    public override void DisplayInfo() {
        base.DisplayInfo();
        Console.WriteLine($"Университет: {university}");
        Console.WriteLine($"Останали месеци: {monthsRemaining}");
        Console.WriteLine($"Стажът е завършен: {(IsInternshipComplete() ? "Да" : "Не")}");
    }
}

// Използване
Employee emp1 = new Employee("Иван", "Иванов", "EMP001", 2000);
Manager mgr1 = new Manager("Мария", "Петрова", "MGR001", 3000, 1000, 5);
Developer dev1 = new Developer("Петър", "Стоянов", "DEV001", 2500, "C#", 3);
Intern intern1 = new Intern("Анна", "Димитрова", "INT001", 1000, "СУ", 6);

// Добавяне на членове в екипа на мениджъра
mgr1.AddTeamMember("Петър Стоянов");
mgr1.AddTeamMember("Анна Димитрова");

// Добавяне на умения на разработчика
dev1.AddSkill("C#");
dev1.AddSkill("SQL");
dev1.AddSkill("ASP.NET");

// Показване на информация
emp1.DisplayInfo();
Console.WriteLine();
mgr1.DisplayInfo();
Console.WriteLine();
dev1.DisplayInfo();
Console.WriteLine();
intern1.DisplayInfo();</code></pre>
        </div>

        <h2><span class="section-number">8. Предимства на наследяването</span></h2>
        
        <div class="patterns">
            <h4>Ключови предимства:</h4>
            <ul>
                <li><strong>Преизползване на код</strong> - не се налага да пренаписваме функционалност</li>
                <li><strong>Иерархия</strong> - логическо групиране на свързани класове</li>
                <li><strong>Полиморфизъм</strong> - един интерфейс, различни имплементации</li>
                <li><strong>Поддръжка</strong> - лесно добавяне на нови функции</li>
                <li><strong>Специализация</strong> - всеки клас може да има специфична функционалност</li>
            </ul>
        </div>

        <h2><span class="section-number">9. Практически задачи</span></h2>
        <div class="highlight">
            <h4>Задачи за упражнение:</h4>
            <ul>
                <li><strong>Създай йерархия от класове</strong> - Vehicle -> Car, Motorcycle, Truck</li>
                <li><strong>Имплементирай система за животни</strong> - Animal -> Mammal, Bird, Fish</li>
                <li><strong>Направи йерархия за документи</strong> - Document -> Contract, Invoice, Report</li>
                <li><strong>Създай система за геометрични фигури</strong> - Shape -> Rectangle, Circle, Triangle</li>
                <li><strong>Имплементирай йерархия за мебели</strong> - Furniture -> Chair, Table, Sofa</li>
            </ul>
        </div>

        <h2><span class="section-number">10. Заключение</span></h2>
        <div class="important">
            <p>Наследяването е мощна функционалност, която ни позволява да създаваме йерархии от класове и да преизползваме код ефективно, като в същото време добавяме специфична функционалност за всеки клас.</p>
        </div>

        <div class="patterns">
            <h4>Ключови принципи:</h4>
            <ul>
                <li><strong>IS-A връзка</strong> - производният клас Е вид на базовия</li>
                <li><strong>Преизползване</strong> - наследяване на код и функционалност</li>
                <li><strong>Специализация</strong> - добавяне на специфична функционалност</li>
                <li><strong>Полиморфизъм</strong> - различни имплементации на същия интерфейс</li>
                <li><strong>Иерархия</strong> - логическо групиране на свързани класове</li>
            </ul>
        </div>
    </div>
</body>
</html>
