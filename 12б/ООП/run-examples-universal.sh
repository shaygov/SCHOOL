#!/bin/bash

echo "=== C# –û–û–ü –ü—Ä–∏–º–µ—Ä–∏ –∑–∞ 12 –∫–ª–∞—Å (–£–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω) ==="
echo "–ò–∑–±–µ—Ä–µ—Ç–µ —É—Ä–æ–∫ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:"
echo "1. –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ"
echo "2. –°—Ç–∞—Ç–∏—á–Ω–∏ —á–ª–µ–Ω–æ–≤–µ"
echo "3. –ù–∞—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ"
echo "4. –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏ –∫–ª–∞—Å–æ–≤–µ"
echo "5. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏"
echo "6. –®–∞–±–ª–æ–Ω–Ω–∏ –∫–ª–∞—Å–æ–≤–µ –∏ –º–µ—Ç–æ–¥–∏"
echo "7. –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑—ä–º"
echo "8. –†–∞–±–æ—Ç–∞ —Å –æ–±–µ–∫—Ç–∏ - –ò—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –∏ –ö–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∏"
echo "9. –õ–∞–º–±–¥–∞ –∏–∑—Ä–∞–∑–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏"
echo "10. –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –æ–±–µ–∫—Ç–∏ - –î–µ–ª–µ–≥–∞—Ç–∏ –∏ –°—ä–±–∏—Ç–∏—è"
echo "11. –ò–∑–ø—ä–ª–Ω–∏ –≤—Å–∏—á–∫–∏ –ø—Ä–∏–º–µ—Ä–∏"
echo "0. –ò–∑—Ö–æ–¥"
echo

read -p "–í—ä–≤–µ–¥–µ—Ç–µ –Ω–æ–º–µ—Ä (0-11): " choice

run_example() {
    local lesson_dir="$1"
    local lesson_name="$2"
    
    echo "=== $lesson_name ==="
    
    if [ ! -d "$lesson_dir/–ü—Ä–∏–º–µ—Ä–∏" ]; then
        echo "‚ùå –ü–∞–ø–∫–∞—Ç–∞ '$lesson_dir/–ü—Ä–∏–º–µ—Ä–∏' –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!"
        return 1
    fi
    
    cd "$lesson_dir/–ü—Ä–∏–º–µ—Ä–∏"
    
    if [ ! -f "Program.cs" ]; then
        echo "‚ùå –§–∞–π–ª—ä—Ç 'Program.cs' –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!"
        cd ../..
        return 1
    fi
    
    echo "üìÅ –†–∞–±–æ—Ç–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"
    echo "üìÑ –ù–∞–º–µ—Ä–µ–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ:"
    ls -la *.cs 2>/dev/null || echo "   –ù—è–º–∞ .cs —Ñ–∞–π–ª–æ–≤–µ"
    echo
    
    echo "üî® –ö–æ–º–ø–∏–ª–∏—Ä–∞–Ω–µ —Å dotnet..."
    if dotnet run --no-build 2>/dev/null; then
        echo "‚úÖ –£—Å–ø–µ—à–Ω–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ!"
    else
        echo "üî® –ü—ä—Ä–≤–æ –∫–æ–º–ø–∏–ª–∏—Ä–∞–Ω–µ..."
        if dotnet run; then
            echo "‚úÖ –£—Å–ø–µ—à–Ω–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ!"
        else
            echo "‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ!"
            echo "üîß –û–ø–∏—Ç–≤–∞–º —Å csc –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä..."
            if csc *.cs 2>/dev/null; then
                if [ -f "Program" ]; then
                    ./Program
                    rm -f Program
                elif [ -f "Program.exe" ]; then
                    ./Program.exe
                    rm -f Program.exe
                fi
            else
                echo "‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∫–æ–º–ø–∏–ª–∏—Ä–∞–Ω–µ!"
            fi
        fi
    fi
    
    cd ../..
    echo "----------------------------------------"
    echo
}

case $choice in
    1)
        run_example "01-–î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ-–Ω–∞-–∫–ª–∞—Å–æ–≤–µ" "–£—Ä–æ–∫ 1: –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ"
        ;;
    2)
        run_example "02-–°—Ç–∞—Ç–∏—á–Ω–∏-—á–ª–µ–Ω–æ–≤–µ" "–£—Ä–æ–∫ 2: –°—Ç–∞—Ç–∏—á–Ω–∏ —á–ª–µ–Ω–æ–≤–µ"
        ;;
    3)
        run_example "03-–ù–∞—Å–ª–µ–¥—è–≤–∞–Ω–µ-–Ω–∞-–∫–ª–∞—Å–æ–≤–µ" "–£—Ä–æ–∫ 3: –ù–∞—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–æ–≤–µ"
        ;;
    4)
        run_example "04-–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è-–∏-–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏-–∫–ª–∞—Å–æ–≤–µ" "–£—Ä–æ–∫ 4: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏ –∫–ª–∞—Å–æ–≤–µ"
        ;;
    5)
        run_example "05-–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏" "–£—Ä–æ–∫ 5: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏"
        ;;
    6)
        run_example "06-–®–∞–±–ª–æ–Ω–Ω–∏-–∫–ª–∞—Å–æ–≤–µ-–∏-–º–µ—Ç–æ–¥–∏" "–£—Ä–æ–∫ 6: –®–∞–±–ª–æ–Ω–Ω–∏ –∫–ª–∞—Å–æ–≤–µ –∏ –º–µ—Ç–æ–¥–∏"
        ;;
    7)
        run_example "07-–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑—ä–º" "–£—Ä–æ–∫ 7: –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑—ä–º"
        ;;
    8)
        run_example "08-–†–∞–±–æ—Ç–∞-—Å-–æ–±–µ–∫—Ç–∏-–ò—Ç–µ—Ä–∞—Ç–æ—Ä–∏-–∏-–ö–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∏" "–£—Ä–æ–∫ 8: –†–∞–±–æ—Ç–∞ —Å –æ–±–µ–∫—Ç–∏ - –ò—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –∏ –ö–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∏"
        ;;
    9)
        run_example "09-–õ–∞–º–±–¥–∞-–∏–∑—Ä–∞–∑–∏-–∏-—Ñ—É–Ω–∫—Ü–∏–∏" "–£—Ä–æ–∫ 9: –õ–∞–º–±–¥–∞ –∏–∑—Ä–∞–∑–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏"
        ;;
    10)
        run_example "10-–ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è-–º–µ–∂–¥—É-–æ–±–µ–∫—Ç–∏-–î–µ–ª–µ–≥–∞—Ç–∏-–∏-–°—ä–±–∏—Ç–∏—è" "–£—Ä–æ–∫ 10: –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –æ–±–µ–∫—Ç–∏ - –î–µ–ª–µ–≥–∞—Ç–∏ –∏ –°—ä–±–∏—Ç–∏—è"
        ;;
    11)
        echo "=== –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–∏–º–µ—Ä–∏ ==="
        for dir in */; do
            if [ -d "$dir" ] && [ -d "$dir/–ü—Ä–∏–º–µ—Ä–∏" ]; then
                lesson_name=$(basename "$dir")
                run_example "$dir" "$lesson_name"
            fi
        done
        ;;
    0)
        echo "üëã –î–æ–≤–∏–∂–¥–∞–Ω–µ!"
        exit 0
        ;;
    *)
        echo "‚ùå –ù–µ–≤–∞–ª–∏–¥–µ–Ω –∏–∑–±–æ—Ä!"
        ;;
esac

echo
read -p "–ù–∞—Ç–∏—Å–Ω–µ—Ç–µ Enter –∑–∞ –≤—Ä—ä—â–∞–Ω–µ –≤ –º–µ–Ω—é—Ç–æ..." 
exec "$0"
